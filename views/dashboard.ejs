<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/styles/dashboard.css">
    <link rel="stylesheet" href="/styles/header.css">
</head>
<body>
<%- include('common/header') %>

<div class="dashboard-summary">
    <h1>Bienvenue sur le Tableau de bord Administrateur</h1>
    <p>
        Accès rapide à la gestion des utilisateurs, des offres et au suivi en temps réel des enchères.
    </p>
</div>

<div class="dashboard-grid-2x2">
    <div class="section">
        <h2>Offres</h2>
        <ul>
            <li>Nombre d'offres : <%= offersCount %></li>
            <li>Offre la plus élevée : <%= maxOffer %> €</li>
            <li>Offre la plus basse : <%= minOffer %> €</li>
            <li>Offre moyenne : <%= avgOffer %> €</li>
        </ul>
        <div class="dashboard-actions">
            <a class="btn" href="/offers">Voir toutes les offres</a>
        </div>
    </div>
    <div class="section">
        <h2>Utilisateurs</h2>
        <ul>
            <li>Nombre d'utilisateurs : <%= usersCount %></li>
            <li>Nombre d'administrateurs : <%= adminCount %></li>
        </ul>
        <div class="dashboard-actions">
            <a class="btn" href="/users">Voir tous les utilisateurs</a>
        </div>
    </div>
    <div class="section">
        <h2>Enchères</h2>
        <ul>
            <li>Nombre d'enchères : <%= bidsCount %></li>
            <li>Mise maximale : <%= maxBid %> €</li>
            <li>Mise minimale : <%= minBid %> €</li>
            <li>Mise moyenne : <%= avgBid %> €</li>
            <li>Total des enchères : <%= totalBids %> €</li>
        </ul>
    </div>
    <div class="chart-section">
        <h2>Statistiques globales</h2>
        <div class="chart-container">
            <canvas id="statsChart" width="400" height="200"></canvas>
        </div>
    </div>
</div>

</body>
<script>
    const dashboardData = [<%= usersCount %>, <%= offersCount %>, <%= bidsCount %>];
    window.dashboardData = dashboardData;
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/js/dashboardView.js"></script>
</html>